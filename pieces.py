
class Piece:

    def __init__(self, pieceID, imagepath=None):
        self.location = None ### [0,0,0]
        self.state = "hand" ### hand, board, taken, ban
        self.pieceID = pieceID
        self.imagepath = imagepath
        self.potential = {1:[], 2:[], 3:[]}

        if pieceID < 1 or pieceID > 50: 
            print("ERROR: pieceID")
            raise

        p={
             1:"師",  2:"大",  3:"中",  4:"小",  5:"小",  6:"侍",  7:"侍",  8:"槍",  9:"槍", 10:"槍",
            11:"馬", 12:"馬", 13:"忍", 14:"忍", 15:"砦", 16:"砦", 17:"兵", 18:"兵", 19:"兵", 20:"兵", 
            21:"砲", 22:"弓", 23:"弓", 24:"筒", 25:"謀",
            26:"師", 27:"大", 28:"中", 29:"小", 30:"小", 31:"侍", 32:"侍", 33:"槍", 34:"槍", 35:"槍",
            36:"馬", 37:"馬", 38:"忍", 39:"忍", 40:"砦", 41:"砦", 42:"兵", 43:"兵", 44:"兵", 45:"兵",
            46:"砲", 47:"弓", 48:"弓", 49:"筒", 50:"謀"
        }
        self.piecetype = p[pieceID]

                ### 師 =[1,26]
        if self.piecetype == "師":
            self.potential = {1:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]], 
                        2:[[-2,-2],[-2,0],[-2,2],[0,-2],[0,2],[2,-2],[2,0],[2,2]], 
                        3:[[-2,-2],[-2,0],[-2,2],[0,-2],[0,2],[2,-2],[2,0],[2,2]]}
        ### 大 = [2, 27]
        if self.piecetype == "大":
            self.potential = {1:[[-8,0],[-7,0],[-6,0],[-5,0],[-4,0],[-3,0],[-2,0],[-1,0],[8,0],[7,0],[6,0],[5,0],[4,0],[3,0],[2,0],[1,0],[0,-8],[0,-7],[0,-6],[0,-5],[0,-4],[0,-3],[0,-2],[0,-1],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]], 
                        2:[[-2,-2],[-2,2],[2,-2],[2,2]], 
                        3:[[-3,-3],[-3,3],[3,-3],[3,3]]}
        ### 中 = [3, 28]
        if self.piecetype == "中":
            self.potential = {1:[[-8,-8],[-7,-7],[-6,-6],[-5,-5],[-4,-4],[-3,-3],[-2,-2],[-1,-1],[-8,8],[-7,7],[-6,6],[-5,5],[-4,4],[-3,3],[-2,2],[-1,1],[8,-8],[7,-7],[6,-6],[5,-5],[4,-4],[3,-3],[2,-2],[1,-1],[-1,1],[8,8],[7,7],[6,6],[5,5],[4,4],[3,3],[2,2],[1,1],[-1,0],[0,-1],[1,0],[0,1]], 
                        2:[[-2,0],[0,-2],[2,0],[0,2]], 
                        3:[[-3,0],[0,-3],[3,0],[0,-3]]}
            
        ### 小 = [4, 5, 29, 30]
        if self.piecetype == "小":
            self.potential = {1:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,0]],
                        2:[[-2,-2],[-2,0],[-2,2],[0,-2],[0,2],[2,0]],
                        3:[[-3,-3],[-3,0],[-3,3],[0,-3],[0,3],[3,0]]}
            
        ### 侍 = [6, 7, 31, 32]
        if self.piecetype == "侍":
            self.potential = {1:[[-1,-1],[-1,0],[-1,1],[1,0]], 2:[[-2,-2],[-2,0],[-2,2],[2,0]], 3:[[-3,-3],[-3,0],[-3,3],[3,0]]}
        ### 槍 = [8, 9, 10, 33, 34, 35]
        if self.piecetype == "槍":
            self.potential = {1:[[-1,-1],[-1,0],[-1,1],[1,0],[-2,0]], 2:[[-2,-2],[-3,0],[-2,2],[2,0]], 3:[[-3,-3],[-4,0],[-3,3],[3,0]]}

        ### 馬 = [11, 12, 36, 37]
        if self.piecetype == "馬":
            self.potential = {1:[[-2,0],[-1,0],[0,-1],[0,1],[1,0],[2,0]], 2:[[-3,0],[0,-2],[0,2],[3,0]], 3:[[-4,0],[0,-3],[0,3],[4,0]]}
        ### 忍 = [13, 14, 38, 39]
        if self.piecetype == "忍":
            self.potential = {1:[[-2,-2],[-2,2],[-1,-1],[-1,1],[1,-1],[1,1],[2,-2],[2,2]], 2:[[-3,-3],[-3,3],[3,-3],[3,3]], 3:[[-4,-4],[-4,4],[4,-4],[4,4]]}
        ### 砦 = [15, 16, 40, 41]
        if self.piecetype == "砦":
            self.potential = {1:[[-1,0],[0,-1],[0,1],[1,-1],[1,1]], 2:[[-2,0],[0,-2],[0,2],[2,-2],[2,2]], 3:[[-3,0],[0,-3],[0,3],[3,-3],[3,3]]}
        ### 兵 [17,18,19,20,42,43,44,45]
        if self.piecetype == "兵":
            self.potential = {1:[[1,0],[-1,0]],2:[[2,0],[-2,0]],3:[[3,0],[-3,0]]}
        ### 砲
        if self.piecetype == "砲":
            self.potential = {1:[[-3,0],[0,-1],[0,1],[1,0]], 2:[[-4,0],[0,-2],[0,2],[2,0]], 3:[[-5,0],[0,-3],[0,3],[3,0]]}
        ### 弓
        if self.piecetype == "弓":
            self.potential = {1:[[-2,-1],[-2,0],[-2,1],[1,0]], 2:[[-3,-2],[-3,0],[-3,2],[2,0]], 3:[[-4,-3],[-4,0],[-4,3],[3,0]]}
        ### 筒
        if self.piecetype == "筒":
            self.potential = {1:[[-2,0],[1,-1],[1,1]], 2:[[-3,0],[2,-2],[2,2]], 3:[[-4,0],[3,-3],[3,3]]}
        ### 謀
        if self.piecetype == "謀":
            self.potential = {1:[[-1,-1],[-1,1],[1,0]], 2:[[-2,-2],[-2,2],[2,0]], 3:[[-3,-3],[-3,3],[3,0]]}

        ### 相手駒のみ移動範囲の向きを変える
        if self.pieceID > 25:
            for i in self.potential:
                j = []
                for k in self.potential[i]:
                    j.append(list(map(lambda x:x * -1, k)))
                self.potential[i] = j

    def state_hand(self):
        return "hand"

    def state_board(self):
        return "board"

    def state_taken(self):
        return "taken"

    def state_ban(self):
        return "ban"

    def level(self):
        try:
            return self.location[2]
        except:
            return 0

    
    